{% extends 'base.html' %}
{% from 'macros.html' import mapbox %}
{% from 'macros.html' import checkpoint_form, new_checkpoint %}

{% block header %}Make a new SaddleTime Route{% endblock %}
{% block page_sytle %}
  <link rel="stylesheet" href="/static/css/route-form.css">
{% endblock %}
{% block content %}
  <div class="row justify-content-center">
    <div class="col col-12 col-md-7" id="checkpoint-forms">
      <!-- start checkpoint -->
      {{ checkpoint_form(0, locations[0])}}
      <!-- insert checkpoint button -->
      {{ new_checkpoint(1) }}
      <!-- intermediate checkpoints (with new checkpoint button between) -->
      {% for i in range(1, cps+1) %}
        {% if i == new_cp_id %}
          {{ checkpoint_form(i, False)}}
        {% else %}
          {{ checkpoint_form(i, locations[i]) }}
        {% endif %}
        {{ new_checkpoint(i+1) }}
      {% endfor %}
      <!-- end checkpoint -->
      {{ checkpoint_form(999, locations[cps+1])}}
    </div>
    <div class="col col-12 col-md-5">
      <div class="row justify-content-center mt-5">
        <div class="col col-3 d-none d-md-block"></div>
        <div class="col col-md-6">
          <button id="preview-route" class="btn btn-block btn-info rounded m-2" disabled>preview route</button>
        </div>
        <div class="col col-3 d-none d-md-block"></div>
      </div>
      <div class="row">
        <div class="col col-3 d-none d-md-block"></div>
        <div class="col col-md-6">
        </div>
        <div class="col col-3 d-none d-md-block"></div>
      </div>
    </div>
  </div>
  <div class="row justify-content-center">
    <div class="col col-12 col-lg-8">
      {{ mapbox (lngs[0], lats[0], 15, medium, "cp0")}}
    </div>
    <div class="col col-12 col-lg-4">
      <div class="row">
        <div class="col">
          <div id="summary"></div>
          <div id="directions"></div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
{% block scripts_after %}
<script src="/static/js/routes.js"></script>
{% endblock %}