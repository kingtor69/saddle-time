{% extends 'base.html' %}

{% block page_sytle %}
  <link rel="stylesheet" href="static/css/weather.css">
{% endblock %}
<!-- {% block static_path %}{% endblock %}
{% block bootstrap_static_route %}{% endblock %}
{% block jasmine_route %}{% endblock %}
{% block home_path %}{% endblock %}
{% block jasmine_script1_static_route %}{% endblock %}
{% block jasmine_script2_static_route %}{% endblock %}
{% block jasmine_script3_static_route %}{% endblock %}
{% block scripts_path %}{% endblock %}
{% block test_scripts_path %}{% endblock %} -->
{% block header %}SaddleTime{% endblock %}
{% block content %}
<div class="container">
  <div class="row justify-content-center">
    <div class="col col-md-8">
      <span class="d-none"></span>
      <table class="table table-dark table-striped rounded" id="weather-table">
        <thead>
          <tr id="weather-header-selectors">
            <th class="pt-4 my-3">
              <div class="row justify-content-left">
                  <span id="weather-header">
                    Current weather in: &nbsp;
                    <input type="text" class="weather-city city-is-set" id="weather-city-input" value="{{ weather.city }}">
                  </span>
                  <small class="text-muted" id="weather-city-directions"><i>click city to change</i> or <button id="browser-location-select" class="">click here to use broswer location</button></small>
              </div>
            </th>
            <th class="form-floating">
              <!-- this form in Python/Flask -->
              <form action="/" method="POST" id="weather-units" class="d-inline">
                <select id="units-selector" class="form-select py-0 my-0 px-4 bg-info" id="unitSelect" aria-label="Floating label select example">
                  {% if weather_units == 'imperial' %}
                    <option class="metric-option" value="metric">℃/kmph</option>
                    <option class="imperial-option" selected value="imperial">℉/mph</option>
                  {% else %}
                    <option class="metric-option" selected value="metric">℃/kmph</option>
                    <option class="imperial-option" value="imperial">℉/mph</option>
                  {% endif %}
                </select>
              </form>
            </th>
          </tr>
          <tr id="weather-conditions-row">
            <th class="h3" id="weather-conditions">{{ weather['conditions'] }} </th>
            <th id="weather-icon"><img src="{{ weather['weather_icon_url'] }}" /></th>
          </tr>
        </thead>
        <tbody id="weather-details">
          {% for key in weather['current_weather_details'].keys() %}
          <tr>
            <td class="weather-detail-key">{{ key }}</td>
            <td class="weather-detail-value">{{ weather['current_weather_details'][key] }}{% if key=="description" %}<img src="{{ weather['weather_icon_url'] }}">{% endif %}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="col col-md-4">
      {% if g.user == "guest" %}
      <div class="row m-5"><br></div>
      {% endif %}
      <div class="row justify-content-center">
        <a href="/routes/new" class="d-block btn btn-block btn-primary m-2" id="new-route-button">make new route{% if g.user.username == "guest" %} as guest{% endif %}</a>
      </div>
      {% if g.user.username == "guest" %}
      <div class="row justify-content-center">
        <div class="col col-6">
          <a href="/login" class="d-block btn btn-block btn-info ml-2 my-2">login</a>
        </div>
        <div class="col col-6">
          <a href="/users/signup" class="d-block btn btn-block btn-success my-2 mr-2">sign-up</a>
        </div>
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
{% block scripts_after %}
  <script src="static/js/weather.js"></script>
  <!-- <script src="static/js/tests/weather.test.js"></script>   -->
{% endblock %}